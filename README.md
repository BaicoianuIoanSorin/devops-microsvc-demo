# Micro service demo
This repository holds a small demonstration project that shows how a micro service can be built and used by another web application.
Both the micro service and the web application using it are written in Java using Spring Boot. Maven is used as build tool.

The micro service uses PostgreSQL to store and fetch some dummy data.

The two Spring Boot apps are placed in two separate Java projects, each built with Maven, in the folders micro-service and micro-service-user, respectively.

## Run time setup
All three parts
* PostgreSQL,
* Micro service and
* Web application using the micro service

runs in a separate container.
```
Container 1           Container 2           Container 3
+--------------+      +--------------+      +--------------+     Point
|  PostgreSQL  @ <--> | Microservice @ <--> |   Web app    @ <-- browser
| on port 5432 |      | on port 8080 |      | on port 8088 |     here
+--------------+      +--------------+      +--------------+
```
## Running the demo
### Prerequisites
To run the demo you will thus need these apps installed on your computer:
* WSL2 (Windows Subsystem for Linux v2)
* Docker Desktop

### Starting the demo
1. Clone the repository to a local folder on your pc.
2. Start a shell in the top folder of the cloned repository (use PowerShell or Ubuntu/Linux/bash, it does not matter).
3. Write this command in the shell: `docker compose up`
4. That's it - docker compose will pull and build the necessary images, start the containers and everything else needed.
5. Point your browser at: `http://localhost:8088/getdata`
6. The web app now uses the micro service to get some data and shows the result.

### Putting some data in the database
When the demo starts out from scratch there's no data to show. Use this command to add some data to the demo (this only works from a Linux/bash shell):

` curl -d '{"id":1000, "data":"Woooooot??????!"}' -H "Content-Type: application/json" -X POST http://localhost:8080/entries/v1/entry`

The id is ignored and replaced with a unique (monotonically growing) id generated by PostgreSQL.

## For more info
Look at the README's for the individual projects for more info. The README for the microservice gives some info at inspecting the database.
* [README for the microservice](./micro-service/README.md)
* [README for the web app that uses the microservice](./micro-service-user/README.md)